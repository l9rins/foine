{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useNavigate}from'react-router-dom';import'./Profile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{var _user$username;const[user,setUser]=useState(null);const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{fetchUserProfile();},[fetchUserProfile]);const fetchUserProfile=useCallback(async()=>{try{const token=localStorage.getItem('token');const userData=JSON.parse(localStorage.getItem('user'));if(!token||!userData){navigate('/auth');return;}setUser(userData);const response=await fetch(\"https://foine-backend.onrender.com/api/posts/user/\".concat(userData.id),{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok)throw new Error('Failed to fetch user posts');const data=await response.json();setPosts(data);}catch(err){setError('Failed to load profile');console.error(err);}finally{setLoading(false);}},[navigate]);const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');navigate('/auth');};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Foine\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"home-btn\",children:\"Home\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn\",children:\"Logout\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-avatar\",children:/*#__PURE__*/_jsx(\"span\",{children:user===null||user===void 0?void 0:(_user$username=user.username)===null||_user$username===void 0?void 0:_user$username.charAt(0).toUpperCase()})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:user===null||user===void 0?void 0:user.username}),/*#__PURE__*/_jsx(\"p\",{children:user===null||user===void 0?void 0:user.email}),/*#__PURE__*/_jsx(\"div\",{className:\"stats\",children:/*#__PURE__*/_jsxs(\"span\",{children:[posts.length,\" posts\"]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"posts-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Posts\"}),posts.length===0?/*#__PURE__*/_jsxs(\"p\",{className:\"no-posts\",children:[\"No posts yet. \",/*#__PURE__*/_jsx(\"a\",{href:\"/\",onClick:e=>{e.preventDefault();navigate('/');},children:\"Create your first post\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"posts-grid\",children:posts.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:\"post-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:post.imageUrl,alt:post.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:post.title}),/*#__PURE__*/_jsx(\"p\",{children:post.description}),/*#__PURE__*/_jsx(\"div\",{className:\"tags\",children:post.tags.map(tag=>/*#__PURE__*/_jsx(\"span\",{className:\"tag\",children:tag.name},tag.id))})]})]},post.id))})]})]})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","jsx","_jsx","jsxs","_jsxs","Profile","_user$username","user","setUser","posts","setPosts","loading","setLoading","error","setError","navigate","fetchUserProfile","token","localStorage","getItem","userData","JSON","parse","response","fetch","concat","id","headers","ok","Error","data","json","err","console","handleLogout","removeItem","className","children","onClick","username","charAt","toUpperCase","email","length","href","e","preventDefault","map","post","src","imageUrl","alt","title","description","tags","tag","name"],"sources":["C:/Users/Mark Lorenz/Desktop/Foine/frontend/src/pages/Profile.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './Profile.css';\r\n\r\nconst Profile = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchUserProfile();\r\n  }, [fetchUserProfile]);\r\n\r\n  const fetchUserProfile = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const userData = JSON.parse(localStorage.getItem('user'));\r\n\r\n      if (!token || !userData) {\r\n        navigate('/auth');\r\n        return;\r\n      }\r\n\r\n      setUser(userData);\r\n\r\n      const response = await fetch(`https://foine-backend.onrender.com/api/posts/user/${userData.id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      if (!response.ok) throw new Error('Failed to fetch user posts');\r\n      const data = await response.json();\r\n      setPosts(data);\r\n    } catch (err) {\r\n      setError('Failed to load profile');\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    navigate('/auth');\r\n  };\r\n\r\n  if (loading) return <div className=\"loading\">Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      <header className=\"header\">\r\n        <h1>Foine</h1>\r\n        <div className=\"header-actions\">\r\n          <button onClick={() => navigate('/')} className=\"home-btn\">Home</button>\r\n          <button onClick={handleLogout} className=\"logout-btn\">Logout</button>\r\n        </div>\r\n      </header>\r\n\r\n      {error && <div className=\"error\">{error}</div>}\r\n\r\n      <div className=\"profile-content\">\r\n        <div className=\"profile-header\">\r\n          <div className=\"profile-avatar\">\r\n            <span>{user?.username?.charAt(0).toUpperCase()}</span>\r\n          </div>\r\n          <div className=\"profile-info\">\r\n            <h2>{user?.username}</h2>\r\n            <p>{user?.email}</p>\r\n            <div className=\"stats\">\r\n              <span>{posts.length} posts</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"posts-section\">\r\n          <h3>Your Posts</h3>\r\n          {posts.length === 0 ? (\r\n            <p className=\"no-posts\">No posts yet. <a href=\"/\" onClick={(e) => { e.preventDefault(); navigate('/'); }}>Create your first post</a></p>\r\n          ) : (\r\n            <div className=\"posts-grid\">\r\n              {posts.map(post => (\r\n                <div key={post.id} className=\"post-card\">\r\n                  <img src={post.imageUrl} alt={post.title} />\r\n                  <div className=\"post-info\">\r\n                    <h4>{post.title}</h4>\r\n                    <p>{post.description}</p>\r\n                    <div className=\"tags\">\r\n                      {post.tags.map(tag => (\r\n                        <span key={tag.id} className=\"tag\">{tag.name}</span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvB,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,KAAAC,cAAA,CACpB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAkB,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACdkB,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,CAACA,gBAAgB,CAAC,CAAC,CAEtB,KAAM,CAAAA,gBAAgB,CAAGjB,WAAW,CAAC,SAAY,CAC/C,GAAI,CACF,KAAM,CAAAkB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAEzD,GAAI,CAACF,KAAK,EAAI,CAACG,QAAQ,CAAE,CACvBL,QAAQ,CAAC,OAAO,CAAC,CACjB,OACF,CAEAP,OAAO,CAACY,QAAQ,CAAC,CAEjB,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,sDAAAC,MAAA,CAAsDL,QAAQ,CAACM,EAAE,EAAI,CAC/FC,OAAO,CAAE,CACP,eAAe,WAAAF,MAAA,CAAYR,KAAK,CAClC,CACF,CAAC,CAAC,CAEF,GAAI,CAACM,QAAQ,CAACK,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,4BAA4B,CAAC,CAC/D,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClCrB,QAAQ,CAACoB,IAAI,CAAC,CAChB,CAAE,MAAOE,GAAG,CAAE,CACZlB,QAAQ,CAAC,wBAAwB,CAAC,CAClCmB,OAAO,CAACpB,KAAK,CAACmB,GAAG,CAAC,CACpB,CAAC,OAAS,CACRpB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACG,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAmB,YAAY,CAAGA,CAAA,GAAM,CACzBhB,YAAY,CAACiB,UAAU,CAAC,OAAO,CAAC,CAChCjB,YAAY,CAACiB,UAAU,CAAC,MAAM,CAAC,CAC/BpB,QAAQ,CAAC,OAAO,CAAC,CACnB,CAAC,CAED,GAAIJ,OAAO,CAAE,mBAAOT,IAAA,QAAKkC,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,YAAU,CAAK,CAAC,CAE7D,mBACEjC,KAAA,QAAKgC,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBjC,KAAA,WAAQgC,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACxBnC,IAAA,OAAAmC,QAAA,CAAI,OAAK,CAAI,CAAC,cACdjC,KAAA,QAAKgC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BnC,IAAA,WAAQoC,OAAO,CAAEA,CAAA,GAAMvB,QAAQ,CAAC,GAAG,CAAE,CAACqB,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,MAAI,CAAQ,CAAC,cACxEnC,IAAA,WAAQoC,OAAO,CAAEJ,YAAa,CAACE,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,QAAM,CAAQ,CAAC,EAClE,CAAC,EACA,CAAC,CAERxB,KAAK,eAAIX,IAAA,QAAKkC,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAExB,KAAK,CAAM,CAAC,cAE9CT,KAAA,QAAKgC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BjC,KAAA,QAAKgC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BnC,IAAA,QAAKkC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BnC,IAAA,SAAAmC,QAAA,CAAO9B,IAAI,SAAJA,IAAI,kBAAAD,cAAA,CAAJC,IAAI,CAAEgC,QAAQ,UAAAjC,cAAA,iBAAdA,cAAA,CAAgBkC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAO,CAAC,CACnD,CAAC,cACNrC,KAAA,QAAKgC,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BnC,IAAA,OAAAmC,QAAA,CAAK9B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEgC,QAAQ,CAAK,CAAC,cACzBrC,IAAA,MAAAmC,QAAA,CAAI9B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEmC,KAAK,CAAI,CAAC,cACpBxC,IAAA,QAAKkC,SAAS,CAAC,OAAO,CAAAC,QAAA,cACpBjC,KAAA,SAAAiC,QAAA,EAAO5B,KAAK,CAACkC,MAAM,CAAC,QAAM,EAAM,CAAC,CAC9B,CAAC,EACH,CAAC,EACH,CAAC,cAENvC,KAAA,QAAKgC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BnC,IAAA,OAAAmC,QAAA,CAAI,YAAU,CAAI,CAAC,CAClB5B,KAAK,CAACkC,MAAM,GAAK,CAAC,cACjBvC,KAAA,MAAGgC,SAAS,CAAC,UAAU,CAAAC,QAAA,EAAC,gBAAc,cAAAnC,IAAA,MAAG0C,IAAI,CAAC,GAAG,CAACN,OAAO,CAAGO,CAAC,EAAK,CAAEA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAE/B,QAAQ,CAAC,GAAG,CAAC,CAAE,CAAE,CAAAsB,QAAA,CAAC,wBAAsB,CAAG,CAAC,EAAG,CAAC,cAExInC,IAAA,QAAKkC,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxB5B,KAAK,CAACsC,GAAG,CAACC,IAAI,eACb5C,KAAA,QAAmBgC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtCnC,IAAA,QAAK+C,GAAG,CAAED,IAAI,CAACE,QAAS,CAACC,GAAG,CAAEH,IAAI,CAACI,KAAM,CAAE,CAAC,cAC5ChD,KAAA,QAAKgC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnC,IAAA,OAAAmC,QAAA,CAAKW,IAAI,CAACI,KAAK,CAAK,CAAC,cACrBlD,IAAA,MAAAmC,QAAA,CAAIW,IAAI,CAACK,WAAW,CAAI,CAAC,cACzBnD,IAAA,QAAKkC,SAAS,CAAC,MAAM,CAAAC,QAAA,CAClBW,IAAI,CAACM,IAAI,CAACP,GAAG,CAACQ,GAAG,eAChBrD,IAAA,SAAmBkC,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAEkB,GAAG,CAACC,IAAI,EAAjCD,GAAG,CAAC7B,EAAoC,CACpD,CAAC,CACC,CAAC,EACH,CAAC,GAVEsB,IAAI,CAACtB,EAWV,CACN,CAAC,CACC,CACN,EACE,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAArB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}